"use strict";function isValidDottedPath(e){return e!=null&&e!==""&&e!=="hasOwnProperty"&&MEMBER_NAME_REGEX.test("."+e)}function lookupDottedPath(e,t){if(!isValidDottedPath(t))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',t);var n=t.split(".");for(var r=0,i=n.length;r<i&&angular.isDefined(e);r++){var s=n[r];e=e!==null?e[s]:undefined}return e}function shallowClearAndCopy(e,t){t=t||{},angular.forEach(t,function(e,n){delete t[n]});for(var n in e)e.hasOwnProperty(n)&&(n.charAt(0)!=="$"||n.charAt(1)!=="$")&&(t[n]=e[n]);return t}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;angular.module("ngResource",["ng"]).provider("$resource",function(){var e=/^https?:\/\/[^\/]*/,t=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(n,r,i,s){function c(e){return h(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function h(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function p(e,n){this.template=e,this.defaults=a({},t.defaults,n),this.urlParams={}}function d(e,c,h,v){function g(e,t){var n={};return t=a({},c,t),u(t,function(t,r){l(t)&&(t=t()),n[r]=t&&t.charAt&&t.charAt(0)=="@"?lookupDottedPath(e,t.substr(1)):t}),n}function y(e){return e.resource}function b(e){shallowClearAndCopy(e||{},this)}var m=new p(e,v);return h=a({},t.defaults.actions,h),b.prototype.toJSON=function(){var e=a({},this);return delete e.$promise,delete e.$resolved,e},u(h,function(e,c){var h=/^(POST|PUT|PATCH)$/i.test(e.method),p=e.timeout,d=angular.isDefined(e.cancellable)?e.cancellable:v&&angular.isDefined(v.cancellable)?v.cancellable:t.defaults.cancellable;p&&!angular.isNumber(p)&&(r.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete e.timeout,p=null),b[c]=function(t,r,v,w){var E={},S,x,T;switch(arguments.length){case 4:T=w,x=v;case 3:case 2:if(!l(r)){E=t,S=r,x=v;break}if(l(t)){x=t,T=r;break}x=r,T=v;case 1:l(t)?x=t:h?S=t:E=t;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var N=this instanceof b,C=N?S:e.isArray?[]:new b(S),k={},L=e.interceptor&&e.interceptor.response||y,A=e.interceptor&&e.interceptor.responseError||undefined,O,M;u(e,function(e,t){switch(t){default:k[t]=f(e);break;case"params":case"isArray":case"ifMatch":case"interceptor":case"cancellable":}}),!N&&d&&(O=i.defer(),k.timeout=O.promise,p&&(M=s(O.resolve,p))),angular.isDefined(e.ifMatch)&&angular.isDefined(S)&&(angular.isDefined(k.headers)||(k.headers={}),k.headers["If-Match"]=S[e.ifMatch]),h&&(k.data=S),m.setUrlParams(k,a({},g(S,e.params||{}),E),e.url);var _=n(k).then(function(t){var n=t.data;if(n){if(angular.isArray(n)!==!!e.isArray)throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",c,e.isArray?"array":"object",angular.isArray(n)?"array":"object",k.method,k.url);if(e.isArray)C.length=0,u(n,function(e){typeof e=="object"?C.push(new b(e)):C.push(e)});else{var r=C.$promise;shallowClearAndCopy(n,C),C.$promise=r}}return t.resource=C,t},function(e){return(T||o)(e),i.reject(e)});return _["finally"](function(){C.$resolved=!0,!N&&d&&(C.$cancelRequest=angular.noop,s.cancel(M),O=M=k.timeout=null)}),_=_.then(function(e){var t=L(e);return(x||o)(t,e.headers),t},A),N?_:(C.$promise=_,C.$resolved=!1,d&&(C.$cancelRequest=O.resolve),C)},b.prototype["$"+c]=function(e,t,n){l(e)&&(n=t,t=e,e={});var r=b[c].call(this,e,this,t,n);return r.$promise||r}}),b.bind=function(t){return d(e,a({},c,t),h)},b}var o=angular.noop,u=angular.forEach,a=angular.extend,f=angular.copy,l=angular.isFunction;return p.prototype={setUrlParams:function(t,n,r){var i=this,s=r||i.template,o,a,f="",l=i.urlParams={};u(s.split(/\W/),function(e){if(e==="hasOwnProperty")throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!(new RegExp("^\\d+$")).test(e)&&e&&(new RegExp("(^|[^\\\\]):"+e+"(\\W|$)")).test(s)&&(l[e]={isQueryParamValue:(new RegExp("\\?.*=:"+e+"(?:\\W|$)")).test(s)})}),s=s.replace(/\\:/g,":"),s=s.replace(e,function(e){return f=e,""}),n=n||{},u(i.urlParams,function(e,t){o=n.hasOwnProperty(t)?n[t]:i.defaults[t],angular.isDefined(o)&&o!==null?(e.isQueryParamValue?a=h(o,!0):a=c(o),s=s.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return a+t})):s=s.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return n.charAt(0)=="/"?n:t+n})}),i.defaults.stripTrailingSlashes&&(s=s.replace(/\/+$/,"")||"/"),s=s.replace(/\/\.(?=\w+($|\?))/,"."),t.url=f+s.replace(/\/\\\./,"/."),u(n,function(e,n){i.urlParams[n]||(t.params=t.params||{},t.params[n]=e)})}},d}]});
